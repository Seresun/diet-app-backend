# API Audit Checklist - Diet Backend

## üìã –û–±—â–∏–π –æ–±–∑–æ—Ä

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –∏—Å–∫–ª—é—á–µ–Ω–∏–π.

**–ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**
- **Base URL:** `http://localhost:3000/api`
- **Swagger Docs:** `http://localhost:3000/api/docs`
- **Postman Collection:** `Diet_API_Collection.json`

---

## üîç –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

### 1. **Health Check**
- [ ] `GET /api` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ API
  - [ ] –°—Ç–∞—Ç—É—Å 200
  - [ ] –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ < 2000ms
  - [ ] –û—Ç–≤–µ—Ç –Ω–µ –ø—É—Å—Ç–æ–π

### 2. **Diagnoses (–î–∏–∞–≥–Ω–æ–∑—ã)**
- [ ] `GET /api/diagnoses` - –í—Å–µ –¥–∏–∞–≥–Ω–æ–∑—ã
  - [ ] –°—Ç–∞—Ç—É—Å 200
  - [ ] –û—Ç–≤–µ—Ç - JSON –º–∞—Å—Å–∏–≤
  - [ ] –ö–∞–∂–¥—ã–π –¥–∏–∞–≥–Ω–æ–∑ –∏–º–µ–µ—Ç: `id`, `code`, `description`, `recommendedCalories`, `foods`, `dailyPlans`
  - [ ] `recommendedCalories` –∏–º–µ–µ—Ç: `min`, `max`, `unit: "kcal"`

- [ ] `GET /api/diagnoses/:code` - –î–∏–∞–≥–Ω–æ–∑ –ø–æ –∫–æ–¥—É (–≤–∞–ª–∏–¥–Ω—ã–π)
  - [ ] –°—Ç–∞—Ç—É—Å 200
  - [ ] –û—Ç–≤–µ—Ç - JSON –æ–±—ä–µ–∫—Ç
  - [ ] –ö–æ–¥ –¥–∏–∞–≥–Ω–æ–∑–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–ø—Ä–æ—Å—É
  - [ ] –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

- [ ] `GET /api/diagnoses/:code` - –î–∏–∞–≥–Ω–æ–∑ –ø–æ –∫–æ–¥—É (–Ω–µ –Ω–∞–π–¥–µ–Ω)
  - [ ] –°—Ç–∞—Ç—É—Å 404
  - [ ] –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ —Å–æ–¥–µ—Ä–∂–∏—Ç "not found"

- [ ] `GET /api/diagnoses/id/:id` - –î–∏–∞–≥–Ω–æ–∑ –ø–æ ID (–≤–∞–ª–∏–¥–Ω—ã–π)
  - [ ] –°—Ç–∞—Ç—É—Å 200
  - [ ] ID –¥–∏–∞–≥–Ω–æ–∑–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–ø—Ä–æ—Å—É

- [ ] `GET /api/diagnoses/id/:id` - –î–∏–∞–≥–Ω–æ–∑ –ø–æ ID (–Ω–µ –Ω–∞–π–¥–µ–Ω)
  - [ ] –°—Ç–∞—Ç—É—Å 404
  - [ ] –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç

### 3. **Foods (–ü—Ä–æ–¥—É–∫—Ç—ã)**
- [ ] `GET /api/foods` - –í—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã
  - [ ] –°—Ç–∞—Ç—É—Å 200
  - [ ] –û—Ç–≤–µ—Ç - JSON –º–∞—Å—Å–∏–≤
  - [ ] –ö–∞–∂–¥—ã–π –ø—Ä–æ–¥—É–∫—Ç –∏–º–µ–µ—Ç: `id`, `code`

- [ ] `GET /api/foods/code/:code` - –ü—Ä–æ–¥—É–∫—Ç –ø–æ –∫–æ–¥—É (–≤–∞–ª–∏–¥–Ω—ã–π)
  - [ ] –°—Ç–∞—Ç—É—Å 200
  - [ ] –ö–æ–¥ –ø—Ä–æ–¥—É–∫—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–ø—Ä–æ—Å—É

- [ ] `GET /api/foods/code/:code` - –ü—Ä–æ–¥—É–∫—Ç –ø–æ –∫–æ–¥—É (–Ω–µ –Ω–∞–π–¥–µ–Ω)
  - [ ] –°—Ç–∞—Ç—É—Å 404

- [ ] `GET /api/foods/:id` - –ü—Ä–æ–¥—É–∫—Ç –ø–æ ID (–≤–∞–ª–∏–¥–Ω—ã–π)
  - [ ] –°—Ç–∞—Ç—É—Å 200
  - [ ] ID –ø—Ä–æ–¥—É–∫—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–ø—Ä–æ—Å—É

- [ ] `GET /api/foods/:id` - –ü—Ä–æ–¥—É–∫—Ç –ø–æ ID (–Ω–µ –Ω–∞–π–¥–µ–Ω)
  - [ ] –°—Ç–∞—Ç—É—Å 404

### 4. **Daily Plans (–ü–ª–∞–Ω—ã –ø–∏—Ç–∞–Ω–∏—è)**
- [ ] `GET /api/daily-plan` - –í—Å–µ –ø–ª–∞–Ω—ã –ø–∏—Ç–∞–Ω–∏—è
  - [ ] –°—Ç–∞—Ç—É—Å 200
  - [ ] –û—Ç–≤–µ—Ç - JSON –º–∞—Å—Å–∏–≤
  - [ ] –ö–∞–∂–¥—ã–π –ø–ª–∞–Ω –∏–º–µ–µ—Ç: `id`, `diagnosisId`, `time`, `mealKey`, `weightGrams`, `calories`, `proteins`, `fats`, `carbs`, `ingredients`

- [ ] `GET /api/daily-plan/:diagnosisId` - –ü–ª–∞–Ω –ø–æ ID –¥–∏–∞–≥–Ω–æ–∑–∞ (–≤–∞–ª–∏–¥–Ω—ã–π)
  - [ ] –°—Ç–∞—Ç—É—Å 200
  - [ ] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞: `id`, `code`, `recommendedCalories`, `allowedFoods`, `prohibitedFoods`, `dailyPlan`
  - [ ] `recommendedCalories` –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

- [ ] `GET /api/daily-plan/:diagnosisId` - –ü–ª–∞–Ω –ø–æ ID –¥–∏–∞–≥–Ω–æ–∑–∞ (–Ω–µ –Ω–∞–π–¥–µ–Ω)
  - [ ] –°—Ç–∞—Ç—É—Å 404
  - [ ] –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ —Å–æ–¥–µ—Ä–∂–∏—Ç "not found"

- [ ] `GET /api/daily-plan/id/:id` - –ü–ª–∞–Ω –ø–æ ID (–≤–∞–ª–∏–¥–Ω—ã–π)
  - [ ] –°—Ç–∞—Ç—É—Å 200
  - [ ] –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞

- [ ] `GET /api/daily-plan/id/:id` - –ü–ª–∞–Ω –ø–æ ID (–Ω–µ –Ω–∞–π–¥–µ–Ω)
  - [ ] –°—Ç–∞—Ç—É—Å 404
  - [ ] –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç

### 5. **Diagnosis-Food Relations (–°–≤—è–∑–∏ –¥–∏–∞–≥–Ω–æ–∑-–ø—Ä–æ–¥—É–∫—Ç)**
- [ ] `GET /api/diagnosis-food-relations` - –í—Å–µ —Å–≤—è–∑–∏
  - [ ] –°—Ç–∞—Ç—É—Å 200
  - [ ] –û—Ç–≤–µ—Ç - JSON –º–∞—Å—Å–∏–≤
  - [ ] –ö–∞–∂–¥–∞—è —Å–≤—è–∑—å –∏–º–µ–µ—Ç: `diagnosisId`, `foodId`, `allowed`

- [ ] `GET /api/diagnosis-food-relations/diagnosis/:diagnosisId` - –°–≤—è–∑–∏ –ø–æ –¥–∏–∞–≥–Ω–æ–∑—É
  - [ ] –°—Ç–∞—Ç—É—Å 200
  - [ ] –û—Ç–≤–µ—Ç - JSON –º–∞—Å—Å–∏–≤

- [ ] `GET /api/diagnosis-food-relations/food/:foodId` - –°–≤—è–∑–∏ –ø–æ –ø—Ä–æ–¥—É–∫—Ç—É
  - [ ] –°—Ç–∞—Ç—É—Å 200
  - [ ] –û—Ç–≤–µ—Ç - JSON –º–∞—Å—Å–∏–≤

- [ ] `GET /api/diagnosis-food-relations/diagnosis/:diagnosisId/allowed` - –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
  - [ ] –°—Ç–∞—Ç—É—Å 200
  - [ ] –û—Ç–≤–µ—Ç - JSON –º–∞—Å—Å–∏–≤
  - [ ] –í—Å–µ —Å–≤—è–∑–∏ –∏–º–µ—é—Ç `allowed: true`

- [ ] `GET /api/diagnosis-food-relations/diagnosis/:diagnosisId/prohibited` - –ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
  - [ ] –°—Ç–∞—Ç—É—Å 200
  - [ ] –û—Ç–≤–µ—Ç - JSON –º–∞—Å—Å–∏–≤
  - [ ] –í—Å–µ —Å–≤—è–∑–∏ –∏–º–µ—é—Ç `allowed: false`

### 6. **Error Handling (–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫)**
- [ ] –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–∞—Ä—à—Ä—É—Ç
  - [ ] –°—Ç–∞—Ç—É—Å 404

- [ ] –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π HTTP –º–µ—Ç–æ–¥
  - [ ] –°—Ç–∞—Ç—É—Å 405 –∏–ª–∏ 404

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å –∫–æ–¥–æ–≤

### –û–∂–∏–¥–∞–µ–º—ã–µ —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã:
- **200** - –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- **404** - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- **405** - –ú–µ—Ç–æ–¥ –Ω–µ —Ä–∞–∑—Ä–µ—à–µ–Ω (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)

### –ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
1. **–í–∞–ª–∏–¥–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 200
2. **–ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–µ—Å—É—Ä—Å—ã** - –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 404
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã** - –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 405 –∏–ª–∏ 404
4. **–ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã** - –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 404

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

### Diagnoses (–î–∏–∞–≥–Ω–æ–∑—ã):
```json
{
  "id": 1,
  "code": "balanced_diet_general",
  "description": "",
  "recommendedCalories": {
    "min": 2000,
    "max": 2200,
    "unit": "kcal"
  },
  "foods": [...],
  "dailyPlans": [...]
}
```

### Foods (–ü—Ä–æ–¥—É–∫—Ç—ã):
```json
{
  "id": 1,
  "code": "vegetables",
  "name": null,
  "type": null
}
```

### Daily Plans (–ü–ª–∞–Ω—ã –ø–∏—Ç–∞–Ω–∏—è):
```json
{
  "id": 1,
  "diagnosisId": 1,
  "time": "08:00",
  "mealKey": "oatmeal_fruit_yogurt",
  "weightGrams": 300,
  "calories": 250,
  "proteins": 9,
  "fats": 6,
  "carbs": 40,
  "ingredients": [...]
}
```

### Diagnosis-Food Relations (–°–≤—è–∑–∏):
```json
{
  "diagnosisId": 1,
  "foodId": 1,
  "allowed": true
}
```

---

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö:
1. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∫–æ–¥** (404, 405, 500)
2. **–ù–∞–ª–∏—á–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ**
3. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ —Å –æ—à–∏–±–∫–æ–π**
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫** (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)

### –ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫:
```json
{
  "statusCode": 404,
  "message": "Diagnosis not found",
  "error": "Not Found"
}
```

---

## üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### 1. –ò–º–ø–æ—Ä—Ç –≤ Postman:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Postman
2. –ù–∞–∂–º–∏—Ç–µ "Import"
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª `Diet_API_Collection.json`
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `baseUrl` –Ω–∞ `http://localhost:3000/api`

### 2. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ `localhost:3000`
2. –í Postman –≤—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é "Diet API Audit Collection"
3. –ù–∞–∂–º–∏—Ç–µ "Run collection"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

### 3. –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Swagger UI: `http://localhost:3000/api/docs`
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–∞–∂–¥—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –≤—Ä—É—á–Ω—É—é
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–æ–≤
4. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞—É–¥–∏—Ç–∞

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:
- [ ] –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã
- [ ] –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞
- [ ] API –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º

### ‚ùå –ü—Ä–æ–±–ª–µ–º—ã (–µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã):
- [ ] –û–ø–∏—Å–∞—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- [ ] –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ä–µ—à–µ–Ω–∏—è
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏ –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä–∏—Ç—å

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –û–∂–∏–¥–∞–µ–º—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:** < 2000ms –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:** 100% (–≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –æ—Ç–≤–µ—á–∞—é—Ç)
- **–¢–æ—á–Ω–æ—Å—Ç—å:** 100% (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
- [ ] –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –∫–∞–∂–¥–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- [ ] –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ 404/405/500
- [ ] –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–æ–≤
- [ ] –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã

---

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** _______________  
**–ê—É–¥–∏—Ç–æ—Ä:** _______________  
**–°—Ç–∞—Ç—É—Å:** _______________
